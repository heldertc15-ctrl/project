AI Soccer Betting Advisor: Fullstack Architecture Document v1.0
1. Introduction
This document outlines the complete fullstack architecture for the AI Soccer Betting Advisor, including backend systems, frontend implementation, and their integration. It serves as the single source of truth for AI-driven development, ensuring consistency across the entire technology stack.

Starter Template or Existing Project
To accelerate development and ensure a robust foundation, we will use the following:

Frontend: Use Vite with a React + TypeScript template. This provides an extremely fast development server and an optimized build process out of the box.

Backend: Use a standard FastAPI project generator. This will create a logical structure for our Python backend, ready for implementing API endpoints and the core AI logic.

Core Principles

Testability: The architecture must support testing the output of each completed story in isolation. This is achieved through a strong separation of concerns.

Developer Experience: The project must be simple to run and review. A one-command startup (npm run dev) is required for development, and a build + start process will be used to create stable versions for review after each story.

Change Log
| Date | Version | Description | Author |
| :--- | :--- | :--- | :--- |
| 2025-08-16 | 1.1 | Updated external API section to reflect public endpoint usage. | Winston (Architect) |
| 2025-08-16 | 1.0 | Initial architecture draft. | Winston (Architect) |

2. High Level Architecture
Technical Summary
This project will be a fullstack application running in a local environment. It uses a classic client-server model with a React frontend communicating via a REST API to a Python backend. The architecture is designed for simplicity and rapid prototyping within a monorepo structure, with a strong emphasis on separating the core AI logic from the API layer to ensure testability at every stage.

Platform and Infrastructure Choice

Platform: The user's local machine.

Key Services: Local development servers (Vite for frontend, Uvicorn for FastAPI backend).

Deployment: Not applicable for the MVP; this is a local-run-only application.

Repository Structure

Structure: Monorepo.

Monorepo Tool: We will use npm Workspaces, a simple, built-in feature of npm for managing local packages.

High Level Architecture Diagram

Code snippet

graph TD
 A[User] --> B{Browser};
 B --> C[Frontend App (React/Vite)];
 C -- API Call --> D[Backend App (Python/FastAPI)];
 D -- Fetches Data --> E[External Sports API];
 D -- AI Analysis --> F[Public Web Data];
Architectural Patterns

Overall Pattern: Client-Server: A simple and direct pattern where the frontend client makes requests to a backend server.

Frontend Pattern: Component-Based UI: Using React to build the interface out of small, reusable, and testable components.

Backend Pattern: Layered Architecture: The backend is separated into distinct layers (API/Routes, Services/AI Logic, Data Access) to ensure testability.

3. Tech Stack
Category	Technology	Version	Purpose	Rationale
Frontend Language	TypeScript	~5.2.2	Language for frontend code	Provides type safety to prevent common errors.
Frontend Framework	React	~18.2.0	Library for building the UI	Component-based architecture makes the UI modular and testable.
Styling	Tailwind CSS	~3.3.3	CSS Framework	Allows for rapid prototyping of a clean UI.
State Management	React Hooks	~18.2.0	Built-in state management	Sufficient for the MVP's simple needs, avoiding extra libraries.
Backend Language	Python	~3.11	Language for backend/AI	The industry standard for AI and data analysis.
Backend Framework	FastAPI	~0.103.1	API Framework	Modern, high-performance, and simple to use.
Frontend Testing	Vitest	~0.34.4	Testing framework	The native and fastest testing framework for Vite.
Backend Testing	Pytest	~7.4.2	Testing framework	The standard and powerful testing framework for Python.
Database	N/A	-	-	The MVP is stateless and does not require a database.
Deployment	N/A	-	-	The MVP is local-run only and will not be deployed.

Export to Sheets
4. Data Models
1. Match

Purpose: To represent a single soccer match fetched from the external sports API.

TypeScript Interface:

TypeScript

interface Match {
id: string;
homeTeam: string;
awayTeam: string;
startTime: string; // Stored in ISO 8601 format
}
2. PredictionResult

Purpose: To represent the final prediction generated by the AI.

TypeScript Interface:

TypeScript

interface PredictionResult {
betSuggestion: string; // e.g., "Liverpool to win", "Over 2.5 goals"
rationale: string; // The one-sentence explanation
riskLevel: 'Low' | 'Medium' | 'High';
}
5. API Specification
YAML

openapi: 3.0.0
info:
 title: "AI Soccer Betting Advisor API"
 version: "1.0.0"
 description: "API for generating AI-powered soccer match betting predictions."
servers:
 - url: "http://localhost:8000"
 description: "Local Development Server"
paths:
 /matches:
 get:
 summary: "Get Upcoming Soccer Matches"
 responses:
 '200':
 description: "A list of available soccer matches."
 content:
 application/json:
 schema:
 type: array
 items:
 $ref: '#/components/schemas/Match'
 /predict:
 post:
 summary: "Generate a Betting Prediction"
 requestBody:
 required: true
 content:
 application/json:
 schema:
 $ref: '#/components/schemas/PredictionRequest'
 responses:
 '200':
 description: "The AI-generated prediction result."
 content:
 application/json:
 schema:
 $ref: '#/components/schemas/PredictionResult'
components:
 schemas:
 Match:
 type: object
 properties:
 id: { type: string }
 homeTeam: { type: string }
 awayTeam: { type: string }
 startTime: { type: string, format: date-time }
 PredictionRequest:
 type: object
 properties:
 matchId: { type: string }
 riskLevel: { type: string, enum: [Low, Medium, High] }
 PredictionResult:
 type: object
 properties:
 betSuggestion: { type: string }
 rationale: { type: string }
 riskLevel: { type: string, enum: [Low, Medium, High] }
6. Components
Backend Components

API Server: Handles HTTP requests and routes them to services.

Prediction Service: Contains the core AI logic for generating predictions.

Match Data Service: Manages communication with the external sports API.

Web Scraper / Analyzer: Gathers unstructured data from the web for AI analysis.

Frontend Components

Match Selector View: Fetches and displays matches, handles user selection of match and risk.

Prediction Result View: Displays the loading state and the final prediction result.

apiClient: A non-visual module that handles all HTTP communication with the backend.

7. External APIs
TheSportsDB API

Purpose: To fetch a list of upcoming soccer matches.

Documentation: https://www.thesportsdb.com/api.php

Authentication: For the MVP, we will use the public endpoint which does not require an API key. A key may be used in the future for increased reliability.

Rate Limits: The public endpoint has a rate limit that must be handled gracefully.

Key Endpoint: "Next 15 Events by League ID" (e.g., eventsnextleague.php?id=LEAGUE_ID).

8. Core Workflows
Code snippet

sequenceDiagram
 participant User
 participant Frontend
 participant Backend
 participant PredictionService
 participant ExternalSportsAPI
 participant WebData


 User->>Frontend: Loads Application
 Frontend->>Backend: GET /matches
 Backend->>ExternalSportsAPI: Fetch upcoming matches
 ExternalSportsAPI-->>Backend: Return match list
 Backend-->>Frontend: Return match list
 Frontend-->>User: Display matches


 User->>Frontend: Selects Match and Risk Level
 Frontend->>Backend: POST /predict (with matchId, riskLevel)
 Backend->>PredictionService: generate_prediction()
 PredictionService->>WebData: Scrape/analyze match data
 WebData-->>PredictionService: Return analysis data
 PredictionService->>PredictionService: Perform AI calculation
 PredictionService-->>Backend: Return PredictionResult
 Backend-->>Frontend: Return PredictionResult
 Frontend-->>User: Display prediction and rationale
9. Database Schema
No database is required for the MVP. The application is designed to be stateless.

10. Frontend Architecture
Component Organization

Plaintext

frontend/src/
├── components/ # Small, reusable UI components (e.g., Button.tsx)
├── features/ # Components related to a specific feature
│ └── prediction/
│ ├── MatchSelector.tsx
│ └── PredictionView.tsx
├── services/ # For handling API calls
│ └── apiClient.ts
└── App.tsx # The main component that manages which view is shown
State Management & Routing

State: State will be managed locally in components using React's built-in useState hook.

Routing: A routing library is not needed. The app will be a single page that conditionally renders the selection or result view.

11. Backend Architecture
Route Organization

Plaintext

backend/app/
├── api/
│ └── prediction_router.py # Defines the /matches and /predict API routes
├── services/
│ ├── prediction_service.py # Contains the core AI logic
│ ├── match_service.py # Handles fetching data from TheSportsDB
│ └── web_scraper.py # Handles scraping data from the web
└── main.py # Initializes the FastAPI application
Key Patterns

Dependency Injection will be used in the API router to keep it decoupled from the service logic, ensuring testability.

12. Unified Project Structure
Plaintext

ai-soccer-advisor/
├── apps/
│ ├── frontend/
│ │ ├── public/
│ │ ├── src/
│ │ │ ├── components/
│ │ │ ├── features/
│ │ │ │ └── prediction/
│ │ │ ├── services/
│ │ │ └── App.tsx
│ │ └── package.json
│ └── backend/
│ ├── app/
│ │ ├── api/
│ │ ├── services/
│ │ └── main.py
│ └── requirements.txt
├── package.json # Root package.json with workspaces
└── README.md
13. Development Workflow
Prerequisites

Node.js: ~18.17.0 or higher

Python: ~3.11

Initial Setup
Run this command from the project root to install all dependencies:

Bash

npm install
Development Commands

To start both servers: npm run dev

To start only the frontend: npm run dev:frontend

To start only the backend: npm run dev:backend

Environment Configuration
Create a file at apps/backend/.env with your Google Gemini API key:

Bash

GEMINI_API_KEY="YOUR_GEMINI_API_KEY"